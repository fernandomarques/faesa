<!doctype html>
<html lang="pt">

	<head>
		<meta charset="utf-8">

		<title>Estatística para Data Science I</title>

		<meta name="author" content="Fernando Antonio Marques Filho">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="../css/reveal.css">
		<link rel="stylesheet" href="../css/misc.css">
		<link rel="stylesheet" href="../css/theme/sky.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="../lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../css/print/pdf.css' : '../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="reveal">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h3>Análise Exploratória de Dados</h3>					<p>
						<small>Created by Fernando Marques </small>
					</p>
		</section>
	<section data-markdown>
		## Análise Exploratória de Dados
		- Como disciplina, estatística se desenvolveu entre os séculos 17 e 19.
		- Contrario da natureza teórica da probabilidade, a estatística é uma ciência aplicada que modela e analisa dados
		- O primeiro passo de todo projeto de ciência de dados é explorar os Dados
		- Análise exploratória de dados é relativamente uma área nova na estatística
		- Estatística Clássica é quase exclusivamente focada em inferência
			- Tirar conclusão sobre grandes populações baseado em pequenas amostras
	</section>
	<section data-markdown>
		- Em 1962 John W. Tukey escreveu um artigo sobre o futuro da análise de dados, propondo uma nova disciplina chamada de análise
		de dados, tendo inferência como um dos componentes
		- Tukey fez a ligação com as comunidades de engenharia e ciência da computação. Também foi ele quem criou o termo *bit*, abreviação de dígito binário 
		- O campo de análise exploratória foi estabelecido com o agora clássico livro *Exploratory Data Analysis [Tukey - 1977]*
		- Com o crescimento do poder computacional e a quantidade de dados disponível a análise exploratória cresceu muito mais do que seu escopo inicial
	</section>
	<section data-markdown>
		## Elementos de Dados Estruturados
		- Dados vêm de muitas origens: Texto, IoT, Web, ...
		- Na maioria das vezes de forma não estruturada
		- Um grande desafio de data science é exatamente transformar esses dados em informação
		- Para aplicar conceitos estatísticos dados não estruturados devem ser manipulados e processados em dados estruturados
	</section>
	<section data-markdown>
		## Tipos de dados
		- **Contínuo** Pode assumir qualquer valor em um intervalo
		- **Discreto** Só pode assumir números inteiros (contagens)
		- **Categórico** Apenas um conjunto de valores possíveis
		- **Binário** Apenas dois valores. Verdadeiro ou Falso. 0 ou 1. 
		- **Ordinal** Categórico mas com ordenação explícita (Classificação 1-5 estrelas)
	</section>
	<section data-markdown>
		## Tipos de Dados
		- Tipos diferentes de dados pedem formas diferentes de visualização
		- Os software utilizam o tipo do dado para poder ganhar desempenho
		## Ou seja
		- Dados são classificados em software por tipo
		- Podem ser contínuo, discreto, categórico, e Ordinal
		- O tipo funciona como forma de indicar ao software como processar o valor
		- [Taxonomia de dados em R](http://www.r-tutor.com/r-introduction/basic-data-types)
	</section>
	<section data-markdown>
		## Dados Retangulares
		*A referência mais comum para data science são objetos como planilha ou tabela em banco de dados*
		- *Data Frame* dado retangular
		- *Característica* Uma coluna da tabela. Também conhecido como variável, atributo ou preditor
		- *Resultado* muitos projetos envolvem prever resultado. Também conhecido como alvo ou saída
		- *Registros*, uma linha na tabela 
		- *Como dito, muitas vezes os dados devem ser processados antes de chegar ao dado retangular*
	</section>
	<section data-markdown >
		| Category | Currency | Duration  | closePrice | openPrice | Competitive ? |
		| --- | --- | --- |--- |--- |--- |--- |--- |
		| Music | US | 5  | 0.01 | 0.01 | 0 |
		| Music | US | 5  | 0.01 | 0.01 | 0 |
		| Automotive | US | 7  | 0.01 | 0.01 | 0 |
		| Automotive | US | 7  | 0.01 | 0.01 | 0 |
		| Automotive | US | 7  | 0.01 | 0.01 | 0 |
		| Automotive | US | 7  | 0.01 | 0.01 | 0 |
		| Automotive | US | 7  | 0.01 | 0.01 | 1 |
		| Automotive | US | 7  | 0.01 | 0.01 | 1 |
	</section>
	<section data-markdown>
		## Data Frame e Índices
		*Índices são usados para melhorar a eficiência de busca em tabelas*
		- Em SQL tabelas podem possuir índices
		- Em Python a biblioteca pandas usa o objeto *DataFrame*, por padrão cada linha tem um índice que é a ordem 
		das linhas, é possível criar índices multilevel e hierárquico
		- Em R a estrutura é *data.frame* que usa o mesmo índice do pandas. Porém não suporta índices definidos pelo usuário,
		por isso, dois pacotes são usados *data.table* e *dplyr*
	</section>
	<section data-markdown>
		## Diferenças de Terminologias
		- **Estatísticos** usam variáveis preditoras para prever uma variável dependente
		- **Cientistas de dados** usam características para prever o alvo ou objetivo
		- Para **Data Science** uma amostra é uma linha
		- Para **estatística** é uma coleção de linhas
	</section>
	<section data-markdown>
		## Estruturas de dados não retangulares
		- **Séries temporais** guardam os dados da mesma variável em diversas medições. IoT e previsão estatística
		- **Estruturas Espaciais** tem como foco um objeto e suas coordenadas geográficas
		- ** Grafos ** são estruturas de dados usadas para representar relacionamentos físicos, sociais e abstratos.
		São mais utilizados para resolver problemas como de otimização de redes.
	</section>
	<section data-markdown>
		## Estimativas de localização
		> Variáveis numéricas ou de contagem podem ter centenas de valores distintos. Um passo básico na exploração
		de dados é encontrar o valor típico para cada característica
	</section>
	<section data-markdown>
		## Estimativas de localização
		- Média - Soma dos valores dividido pelo número dos valores
		- Média ponderada -  A soma dos valores multiplicado pela ponderação dividido pela soma das ponderações 
		- Mediana - Valor tal que metade dos dados ficam acima e abaixo dele. 
		- Mediana ponderada
		- Média Aparada - Média dos valores depois de retirar um número fixo de valores das extremidades
		- Robustez - Não sensível a valores anômalos ou extremos
		- Valores anômalos *outlier*
	</section>
	<section data-markdown>
		## Estimativas de localização
		- Apesar de fácil de computar e entender, a média não é sempre a melhor medida para encontrar o valor central.
		- Valores calculados são chamados pelos **estatísticos** de *estimativas*
		- Já **cientistas de dados** e **analistas de negócios** os chamam de *métricas*
	</section>
	<section data-markdown>
		## Média
		\begin{aligned}
		Média = \bar{x} = \frac{\sum_{i}^{n} x_i}{n}
		\end{aligned}
		> Em Estatística n e N possuem significados diferentes.
		> N se refere a população.
		> n uma amostra da população.
		> Em data science tanto faz :) 
	</section>
	<section data-markdown>
		## Média Aparada
		\begin{aligned}
		Média Aparada = \bar{x} = \frac{\sum_{i = p + 1}^{n-p} x(i)}{n-2p}
		\end{aligned}
		- A média aparada elimina a influência de valores extremos
		- Exemplo, nas escolas de samba os maiores e menores valores são descartados
		- Isso dificulta que um único jurado consiga manipular o resultado a seu favor
	</section>
	<section data-markdown>
		## Média Ponderada
		\begin{aligned}
		Média Ponderada = \bar{x}_w = 
		\frac{\sum_{i}^{n} w_ix_i}{\sum_{i}^{n} w_i} 
		\end{aligned}
		- Alguns valores podem ser mais importantes que outros, sensores podem ter precisão diferentes
		- Dados coletados podem não representar igualmente diferentes grupos
	</section>
	<section data-markdown>
		## Mediana e Robustez
		- A mediana é o valor do meio de uma lista ordenada
		 - Se houver uma quantidade par de números, a mediana é a média dos dois valores que dividem os dados
		 - Exemplo de distribuição de renda
		- A mediana é considerada robusta a *outliers*
		- Ser um *outlier* não torna o dado inválido, mas em muitos casos eles aparecem por erro de conversão ou medição
		 - *Outliers* devem ser identificados e valem investigações
	</section>
	<section data-markdown>
		## Média Aparada
		- Também é considerado uma métrica robusta
		- Normalmente são eliminados 10% dos valores dos extremos
		- Existem outras métricas para localização que podem são mais eficientes que a média e
		úteis para pequenos dados, mas não trazem muitos benefícios para bases médias ou maiores
	</section>
	<section>
		<h3>Exemplo de Estimativa de localização</h3>
<pre><code class= "R">
state <- read.csv(file='...')
mean(state[["Population"]])
mean(state[["Population"]], trim = 0.1s)
median(state[["Population"]])
weighted.mean(state[["Muder.Rate"]], w=state[["Population"]])
library("matrixStats")
weightedMedian(state[["Muder.Rate"]], w=state[["Population"]])
	</code>
</pre>
	</section>
	<section data-markdown>
		- A métrica básica para localização é a média, mas ela pode ser sensível a valores extremos
		- Métricas como mediana e média aparada são mais robustas
	</section>
	<section data-markdown>
		## Estimativas de variabilidade
		- Localização é uma das medidas de resumir uma característica
		- Outra medida é a variabilidade ou dispersão
		- Mede o quanto os dados estão agrupados ou espalhados
	</section>
	<section data-markdown>
		## Estimativas de variabilidade
		- **Desvio** - a diferença entre os valores observados e a estimativa de localização
		- **Variância** - A soma do quadrado do desvio das médias dividido por n-1
		- **Desvio padrão** - Raiz quadrada da variância
		- **Desvio absoluto médio** - A média dos desvios da média
		- **Mediana absoluta da média** - A mediano dos desvios da média
		
	</section>
	<section data-markdown>
		## Estimativas de variabilidade
		- **Amplitude** - A diferença do maior e do menor valor
		- **Estatísticas ordinais** - métrica baseada nos valores ordenados do menor ao maior
		- **Percentil** - Valor tal que P porcento são iguais ou menores e (100-p) são iguais ou maiores 
		- **Amplitude Interquartil (IQR)** - A diferença entre o 75º quartil e o 25º quartil.
	</section>
	<section data-markdown>
		## Desvio padrão e estimativas relacionadas
		- As estimativas de variação mais usadas são baseadas nas diferenças, ou desvios, entre estimativas de localização
		e os valores observados
		- Os dados [1,4,4]
		- Possuem média 3 e mediana 4
		- O desvio da média é 1-3 = -2, 4-3 = 1, 4-1 = 1.
		- Indicam o quão disperso do centro os valores são
		- Se tirarmos a média, os negativos anulariam os outros valores, por isso pegamos a média dos valores absolutos
		- (2 + 1 + 1)/3 = 1.33. 
	</section>
	<section data-markdown>
		\begin{aligned}
		Desvio Absoluto Médio = \frac{\sum_{i}^{n} |x_i - \bar{x}|} {n}
		\end{aligned}
	</section>
	<section data-markdown>
		\begin{aligned}
		Variância = s^2 = \frac{\sum_{i}^{n} (x_i - \bar{x})^2} {n-1}  \\
		\end{aligned}

		\begin{aligned}
		Desvio padrão = s = \sqrt{Variância}
		\end{aligned}
		- As melhores estimativas de variabilidade são a variância e o desvio padrão
		- O desvio padrão é mais fácil de interpretar, uma vez que está na mesma escala que o dados originais
	</section>
	<section data-markdown>
		## MAD - Desvio absoluto mediano
		\begin{aligned}
		MAD = Mediana(|x_1 - m|, |x_2 - m|, ... , |x_N - m |)
		\end{aligned}
		- Onde m é a mediana
		- Nem a variância nem o desvio padrão são robustos, a variância é ainda pior?
	</section>
	<section data-markdown>
		## Graus de Liberdade
		- Muitos livros de estatística discutem sobre n-1 ou n
		- Se o tamanho dos dados for grande o suficiente, não fará diferença
		- Se usarmos n, estaremos subestimando o valor real da variância
		- Estimador viesado

	</section>
	<section data-markdown>
		## Estimativas com percentil
		- A medida mais simples é o alcance, mas é extremamente sensível a outliers
		- Para dar robustez podemos olhar o alcance após remover valores dos extremos
		- Essas estimativas são baseadas em percentis diferentes
		- Pegamos a diferença entre os percentis
		- Uma medida comum é o IQR onde pegamos a distancia entre o 25º e o 75º
		- Para uma massa muito grande de dados percentis exatos podem ser computacionalmente caros
	</section>
	<section data-markdown>
		## Definição precisa de percentil
		\begin{aligned}
		100 * \frac{j}{n} <= P < 100 \times \frac{j+1}{n}
		\end{aligned}
		\begin{aligned}
		Percentile(P) = (1-w)x_{(j)} + wx_{j+1}
		\end{aligned}
	</section>
	<section >
<pre><code class="R">
sd(state[["Population"]])
IQR(state[["Population"]])
mad(state[["Population"]])
</code></pre>
	</section>
	<section data-markdown>
		- A variância e desvio padrão são as métricas de variabilidade mais utilizadas
		- As duas são sensíveis a outliers!
		- Métricas mais robustas incluem média e mediana dos desvios absolutos da média e percentil
		- [Desvios da média e robustez](https://www.r-bloggers.com/absolute-deviation-around-the-median/)
		- [Percentil](http://onlinestatbook.com/2/introduction/percentiles.html)
	</section>
	<section data-markdown>
		## Explorando a distribuição dos dados
	</section>
	<section data-markdown>

	</section>
	<section data-markdown>

	</section>
	<section data-markdown>
		## Links relevantes
		-[Glossário Ingles-PT de estatística](http://glossario.spestatistica.pt/)
		-[Taxonomia de dados em R](http://www.r-tutor.com/r-introduction/basic-data-types)
		-[Desvios da média e robustez](https://www.r-bloggers.com/absolute-deviation-around-the-median/)
		-[Percentil](http://onlinestatbook.com/2/introduction/percentiles.html)
	</section>
		</div>
		</div>

		<script src="../lib/js/head.min.js"></script>
		<script src="../js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				slideNumber: 'c/t',

				transition: 'slide', // none/fade/slide/convex/concave/zoom
				math: {
					// mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
					config: 'TeX-AMS_HTML-full',
					TeX: {
						Macros: {
							R: '\\mathbb{R}',
							set: [ '\\left\\{#1 \\; ; \\; #2\\right\\}', 2 ]
						}
					}
				},
				// Optional reveal.js plugins
				dependencies: [
          { src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../plugin/zoom-js/zoom.js', async: true },
					{ src: '../plugin/notes/notes.js', async: true },
					{ src: '../plugin/math/math.js', async: true }
				]
			});

		</script>

	</body>
</html>
